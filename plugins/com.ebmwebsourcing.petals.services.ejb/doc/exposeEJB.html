<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link href="book.css" rel="stylesheet" type="text/css" />
	<title>Exposing an EJB into Petals</title>
</head>

<body>
<h1>Exposing an EJB into Petals</h1>

<h2>Introduction</h2>
<p>
The EJB plug-in allows you to create a project which contains everything you need
to expose it into PEtLS. The project will embed the JEE and client libraries, the 
JBI descriptor for Petals and a WSDL file matching the exposed EJB.
</p><p>
The WSDL is generated on the fly from the information provided in the wizard.<br />
Its elements are coherent with both the EJB class ands the JBI descriptor that is
generated just before. 
</p>


<h2>The main differences</h2>
<p>
There are slight differences between the usual wizard, as exposed in the Petals
plug-ins overview, and the Petals EJB plug-in. This page shows these differences
and will guide users to expose their EJBs into Petals using this tooling.
</p><p>
To run the EJB wizard, select <b>File &gt; New &gt; Other...</b> and then select
<b>Use EJB</b> in the <b>Petals</b> category.
</p><p>
The first page deals with the libraries your EJB is related to.<br />
Specify the location of the server libraries in the <b>JEE Libraries</b> tab.
</p>
<img src="images/jeeLibs.gif" alt="1st: specify the JEE server libraries" />

<p>Then, specify the <b>Client Libraries</b> in the dedicated tab.</p>
<img src="images/clientLibs.gif" alt="2nd: specify the client libraries, which contain your EJB" />

<p>
Eventually, complete the page by selecting the EJB class.
Provide the beginning of the class name and then select <b>Browse...</b>
to select your class among the given proposals.
</p>
<img src="images/classSelection.gif" alt="3rd: select the class" />

<p>
When you have provided all the information, you are can move on the next page by clicking <b>Next</b>.
The page should look like as below.
</p>
<img src="images/classSpecified.gif" alt="When the class is selected and the classpath specified, you can go on" />

<p>
The next page expects specific information for Petals.<br />
It should be pre-filled from the previous page. The interface parts are disabled.
The service namespace can't be modified, it matches the one that will be generated in the WSDL.
You can modify the service name and the end-point name. The generated WSDL will be coherent with these values.
</p>
<img src="images/jbiPage.gif" alt="JBI information for Petals" />
<p>Once it is done, click <b>Next</b>.</p>


<h2>The usual things</h2>
<p>
As usual, the wizard has a page where you have to specify the project name and the project structure (a Maven
one or a simple one).
</p>
<img src="images/project.gif" alt="The project page" />

<p>
Once this is done, click <b>Next</b>.<br />
The next page contains information which are specific to the Petals EJB component.<br />
Use the tooltips and the elements description to fulfill this page. Let <code>jaxb</code>
as the data-binding. 
</p>
<img src="images/componentPage.gif" alt="The component page" />

<p>
Once this is done, click <b>Next</b>.<br />
The last page expects additional information for Petals.
Most of the time, you won't modify it.
</p>

<p>
Click <b>Finish</b> to end up the wizard and create the project.<br />
The created project contains a jbi.xml file and all the jar files you specified in the wizard.
It should also contain a WSDL file, generated from your EJB class.
</p><p>
The project packaging works as usual, through a right-click on the project, followed by
the selection of <b>Petals &gt; Package for Petals</b>.
</p>
</body>
</html>